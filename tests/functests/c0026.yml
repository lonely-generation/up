doc_meta: |
  folder: shell-func
  title: register result
  head: |
    Showcase you can use reg in shell func to register the result to global runtime

  sections:
    - title: Rules
      content: |
        * if reg=auto, it will use naming pattern: register_taskname_stepname
        * otherwise use the defined name as var name

    - title: Demo
      log: yes


notes:
  goal:
    - to test register a var/dvar into vars
    - once registered, the later step can consume the registered vars

  design:
    - if reg=auto, use the register_taskname_stepname as var name
    - otherwise use the defined name as var name

tasks:

  - name: task
    task:
      -
        func: shell
        name: sayhello
        do:
          - echo "hello,sayhello"
        reg: auto

      -
        func: shell
        name: woohoo
        do:
          - echo "woohoo"
        reg: woohooyaa

      -
        func: shell
        do:
          - echo "{{.register_task_sayhello}}"
          - echo "{{.woohooyaa}}"

